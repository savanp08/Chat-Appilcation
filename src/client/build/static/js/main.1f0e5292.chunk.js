(this.webpackJsonpreact=this.webpackJsonpreact||[]).push([[0],{113:function(e,t,o){},115:function(e,t,o){},126:function(e,t,o){},137:function(e,t,o){},161:function(e,t,o){},162:function(e,t,o){},163:function(e,t,o){},165:function(e,t,o){},166:function(e,t,o){},193:function(e,t,o){},197:function(e,t,o){},198:function(e,t,o){"use strict";o.r(t);var n=o(1),a=o(57),s=o.n(a),c=(o(161),o(162),o(12)),i=o(19),r=o(17),l=o(30),d=o(4),m=(o(163),o(2)),u=function(){var e="personalKey",t="globalKey",o=Object(n.useState)("personalKey"),a=Object(d.a)(o,2),s=a[0],c=a[1],i=function(t,o){console.log({activeKey:t}),console.log({prop:o}),o!==t&&c(t===e?"globalKey":"personalKey")};return Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)("div",{className:"ChatScopeSwitch-container",children:[Object(m.jsx)("div",{className:"ChatScopeSwitch-Element-container"+(s===t?" active":""),onClick:function(){return i(s,t)},children:Object(m.jsx)("p",{className:"ChatScopeSwitch-Menu_Element gradient-text",children:"Global"})}),Object(m.jsx)("div",{className:"ChatScopeSwitch-Element-container"+(s===e?" active":""),onClick:function(){return i(s,e)},children:Object(m.jsx)("p",{className:"ChatScopeSwitch-Menu_Element gradient-text",children:"Personal"})})]})})},j=(o(126),o(165),function(e){e.ProfilePic;var t=e.ProfileName,o=e.LastMessage;return Object(m.jsx)("div",{className:"Profile-Wrapper",children:Object(m.jsxs)("div",{className:"Contact",children:[Object(m.jsx)("div",{className:"Contact-ProfilePic-Container",children:Object(m.jsx)("img",{className:"Contact-ProfilePic",src:"https://previews.123rf.com/images/grandeduc/grandeduc1603/grandeduc160300008/54330729-reaper-moon-rising-3d-render-of-cratered-skull-moon-in-night-sky.jpg",alt:"Not Loaded"})}),Object(m.jsxs)("div",{className:"Contact-BasicInfo",children:[Object(m.jsx)("div",{className:"Profile-Name Text-Control-Box Contact-Text-Width",children:Object(m.jsx)("p",{id:"Room-ProfileName",className:"User-ProfileName Text-Control-Box",children:t})}),Object(m.jsx)("div",{className:"Last-Message Text-Control-Box ",children:Object(m.jsx)("span",{className:"Last-Message Text-Control-Box",children:o})})]})]})})}),g=(o(166),function(e){var t=e.own,o=(e.Img,e.Name),n=e.MessageText,a=e.TimeStamp,s=e.Media;return console.log("Debug-> Msg->",t,o),Object(m.jsx)("div",{className:"Message-Over-Wrapper"+(!0===t?" Own":""),children:Object(m.jsx)("div",{className:"Message-Wrapper"+(!0===t?" Own":""),children:Object(m.jsxs)("div",{className:"Message"+(!0===t?" Own":""),children:[Object(m.jsx)("div",{className:"Sender-Image-Wrapper close",children:Object(m.jsx)("img",{className:"Sender-Image",src:"https://previews.123rf.com/images/grandeduc/grandeduc1603/grandeduc160300008/54330729-reaper-moon-rising-3d-render-of-cratered-skull-moon-in-night-sky.jpg",alt:"Not Loaded"})}),Object(m.jsxs)("div",{className:"MessageComponent-ContentWrapper",id:"MessageComponent-ContentWrapper",children:[Object(m.jsx)("div",{className:"Sender-Name-wrapper close",children:Object(m.jsx)("p",{className:"Sender-Name"+(!0===t?" Own":""),children:o})}),Object(m.jsx)("div",{className:"Message-MediaWrapper"+(s?"":" Hide"),id:"Message-MediaWrapper",children:Object(m.jsx)("img",{className:"Message-Media",src:s,alt:""})}),Object(m.jsxs)("div",{className:"Text_Wrapper",children:[Object(m.jsx)("div",{className:"Message-Text-wrapper close",children:Object(m.jsxs)("div",{className:"Message-Text"+(!0===t?" Own":""),children:[" ",n," "]})}),Object(m.jsx)("div",{className:"TimeStamp-wrapper close",children:Object(m.jsx)("p",{className:"TimeStamp",children:a})})]})]})]})})})}),b=o(18),p=o.n(b),h=o(242),f=o(73),O=o.n(f),v=o(65),x=o(249),w=o(146),N=o(244),R=o(248),S=o(246),y=o(77),M=o.n(y),C=o(247),I=o(16),k=o(41),E=o.n(k),L=(o(113),o(82)),T=function(e){var t=e.socket;console.log("props are  Socket->",t);var o=Object(I.g)().UserName,n="",a=[],s=[];var r=function(){var e=Object(i.a)(Object(c.a)().mark((function e(){var t,a;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((s=[]).push({UserId:o,Name:"TestAccount"}),(t=document.getElementById("RoomName-AddRoom"))&&(n=t.value),!(n.length<3)){e.next=7;break}return window.alert("Room Name Length Should be atLeast 3"),e.abrupt("return");case 7:a=(a=new E.a.Types.ObjectId).toString(),console.log("Creating Room with->",a),l(a);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),l=function(){var e=Object(i.a)(Object(c.a)().mark((function e(n){var a;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("Joning Room in socket server->",n),(a=[]).push(n),a.push(o),t.emit("joinRoom",a),d(n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=Object(i.a)(Object(c.a)().mark((function e(t){return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.post("/Server/Rooms/Room/create/".concat(o),{RoomId:t,Name:n,Members:s,Messages:[],RoomType:"Auth"}).then((function(e){console.log("created new room",e.data),a.forEach((function(e){u(e,t)}))})).catch((function(e){console.log("Err in creating room",e)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),u=function(){var e=Object(i.a)(Object(c.a)().mark((function e(t,o){var n;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Member to be added to this Room->",t,o),n=t,!0,e.next=5,p.a.get("/Server/Auth/CheckUser/".concat(n)).then((function(e){(200===e.status||"Found"===e.data)&&j(n,o)})).catch((function(e){console.log(e)}));case 5:case"end":return e.stop()}}),e)})));return function(t,o){return e.apply(this,arguments)}}(),j=function(){var e=Object(i.a)(Object(c.a)().mark((function e(t,o){return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.post("/Server/Rooms/Room/add/User/".concat(o),{UserId:t,Name:"Temp User",RoomId:o}).then((function(e){console.log("Added new Member",e.data)})).catch((function(e){console.log("Err in adding Member",e)}));case 2:case"end":return e.stop()}}),e)})));return function(t,o){return e.apply(this,arguments)}}();return Object(m.jsxs)(R.a,{component:"form",sx:{p:"2px 4px",display:"flex",alignItems:"center",maxWidth:400,maxHeight:500,flexFlow:"column wrap",justifyContent:"space-around"},children:[Object(m.jsx)(h.a,{required:!0,id:"RoomName-AddRoom",label:"Room Name",defaultValue:"",placeholder:"Room Name"}),Object(m.jsxs)(S.a,{sx:{display:"flex",alignItems:"flex-end",width:"100%",marginTop:"15px"},children:[Object(m.jsx)(M.a,{sx:{color:"action.active",mr:1,my:.5}}),Object(m.jsx)(h.a,{id:"AddUser-TextArea",label:"UserName",variant:"standard"})]}),Object(m.jsx)(C.a,{variant:"contained",sx:{marginTop:"8px"},onClick:function(){!function(){var e=document.getElementById("AddUser-TextArea");if(e){var t=e.value;console.log(t),a.push(t),e.value=""}console.log("Members to be added to New Room->",a)}()},children:"Add User"}),Object(m.jsx)(S.a,{sx:{maxHeight:"120px",maxWidth:"170px",overflowX:"hidden",overFlowY:"scroll",display:"flex",flexFlow:"column wrap",marginTop:"13px"},children:a.map((function(e){return Object(m.jsx)("div",{className:"AddUser-AddRoom",children:Object(m.jsx)("div",{className:"UserName-AddRoom",children:e})})}))}),Object(m.jsx)(C.a,{variant:"contained",sx:{marginTop:"10px"},onClick:function(){r()},children:"Add Room"})]})},B=function(e){var t=e.Rooms,o=e.socket,a=n.useState(""),s=Object(d.a)(a,2),l=s[0],u=s[1];console.log("props are Rooms and Socket->",t,o);var j=t;n.useEffect((function(){console.log("search filter is ",l);for(var e=document.getElementById("RemoveRoomsList").getElementsByClassName("RemoveRoom-Container"),t=0;t<e.length;t++){var o=e[t].getElementsByClassName("RemoveRoomName")[0];console.log("Sub Div in filtering loop",o.childNodes[0].nodeValue);var n=o.childNodes[0].nodeValue;n.toLowerCase().includes(l.toLocaleLowerCase())?(e[t].style.display="",console.log("Element checking for filterting in remove Room",n)):e[t].style.display="none"}}),[l]);var g=0,b={};console.log("in remove Room->"),console.log("Remove Rooms->",t);var f=Object(I.g)(),O="",v=function(){var e=Object(i.a)(Object(c.a)().mark((function e(){var t;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f.UserName&&(O=f.UserName),console.log(b),t=b.RoomId,console.log("Deleteing USer ",O,"from Room",t),e.next=6,p.a.post("/Server/Rooms/Room/Delete/Member/".concat(t,"/").concat(O)).then((function(e){console.log(e.data);var t=document.getElementById("RemoveRoom-SearchArea");t&&(t.value="")})).catch((function(e){console.log(e)}));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(m.jsxs)(R.a,{component:"form",sx:{p:"2px 4px",display:"flex",alignItems:"center",maxWidth:400,flexFlow:"column wrap",justifyContent:"space-around"},children:[Object(m.jsx)(h.a,{required:!0,id:"RemoveRoom-SearchArea",label:"Room Name",defaultValue:"",placeholder:"Room Name",onChange:function(e){u(e.target.value)}}),Object(m.jsx)("div",{id:"RemoveRoomsList",children:Object(m.jsx)(S.a,{sx:{maxHeight:"400px",maxWidth:"400px",overflowX:"scroll",overflowY:"scroll",display:"flex",flexFlow:"column nowrap"},children:Object(r.a)(j.keys()).map((function(e){return++g,Object(m.jsxs)("div",{className:"RemoveRoom-Container",id:"RemoveRoom".concat(g),onClick:function(){console.log("User",O," is going be deleted from roomID",e),document.getElementById("RemoveRoom-Output").innerHTML="Selected Room : ".concat(j.get(e).Name),b={RoomId:e,Name:j.get(e).Name}},children:[Object(m.jsx)("div",{className:"RoomPic",children:Object(m.jsx)("img",{src:j.get(e).Img})}),Object(m.jsx)("div",{className:"RemoveRoomName",children:j.get(e).Name})]})}))})}),Object(m.jsx)("p",{id:"RemoveRoom-Output",className:"RemoveRoom-Output"}),Object(m.jsx)("div",{className:"SubmitRemoveRoom",children:Object(m.jsx)(C.a,{variant:"contained",sx:{marginTop:"10px"},onClick:function(){v()},children:"Remove Room"})})]})},H=function(e){var t,o=e.socket,a=e.SelectedOption,s=e.Rooms;(console.log("props are Rooms and Socket->",s,o),"None"===a)?(t=document.getElementById("RoomSearchBarContainer"))&&t.classList.remove("Hide"):(t=document.getElementById("RoomSearchBarContainer"))&&t.classList.add("Hide");n.useEffect((function(){return window.addEventListener("click",(function(){})),function(){window.removeEventListener("click",(function(){console.log("Removed")}))}}),[]);var c=s;return console.log("In Room Open Options->"),console.log("Rooms passed to Open Options in Room Section are->",s),console.log("IN Open _> Selcted Option is ",a),Object(m.jsxs)("div",{className:"RoomOptions-Wrapper",id:"RoomOptions-Wrapper",children:[Object(m.jsx)("div",{className:"AddRoom-Container"+("Add Room"===a?"":" Hide"),children:Object(m.jsx)(T,{socket:o})}),Object(m.jsx)("div",{className:"RemoveRoom-Container"+("Delete Chat & Room"===a?"":" Hide"),children:Object(m.jsx)(B,{Rooms:c,socket:o})})]})},A=o(50),D=o.n(A),P=function(e){var t=e.socket,o=e.Rooms;console.log("props are Rooms and Socket->",o,t);var a=n.useState("None"),s=Object(d.a)(a,2),c=s[0],i=s[1],r=o;console.log("Rooms List in Room Header Options is ",r);var l=n.useState(null),u=Object(d.a)(l,2),j=u[0],g=u[1],b=n.useState(),p=Object(d.a)(b,2),h=p[0],f=p[1];return n.useEffect((function(){return window.addEventListener("click",(function(){})),function(){window.removeEventListener("click",(function(){console.log("Removed")}))}}),[]),console.log("In Room Header Options->"),console.log("Room Header Rooms->",o),Object(m.jsxs)("div",{children:[Object(m.jsxs)("div",{children:[Object(m.jsx)(x.a,{"aria-label":"more",id:"RoomHeader-OptionsMenu-Icon","aria-controls":h?"long-menu":void 0,"aria-expanded":h?"true":void 0,"aria-haspopup":"true",onClick:function(e){g(e.currentTarget),console.log("Selected option is ",e),f(!0)},children:Object(m.jsx)(D.a,{})}),Object(m.jsx)(w.a,{id:"long-menu",MenuListProps:{"aria-labelledby":"long-button"},anchorEl:j,open:h,onClose:function(){g(null),f(!1)},PaperProps:{style:{maxHeight:216,width:"20ch"}},children:["None","Add Room","Delete Chat & Room"].map((function(e){return Object(m.jsx)(N.a,{selected:e===j,onClick:function(){i(e),f(!1)},children:e},e)}))})]}),Object(m.jsx)(H,{SelectedOption:c,Rooms:r,socket:t})]})},W=o(99),U=o.n(W),F=o(78),Q=o.n(F),_=(o(115),function(e){var t=e.ActiveRoomId,o=(e.Members,"Rooms"),n=(Object(I.g)().UserName,t);"QuickUser"===Object(I.g)().UserType&&(o="QuickRoom"),console.log("Room Id Passed to ADD user is ->",t);var a=function(){var e=Object(i.a)(Object(c.a)().mark((function e(){var t,o;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=document.getElementById("ChatWindow-AddUser-TypeArea"),o="",t&&(o=t.value,console.log(o),t.value=""),console.log("Member to be added to this Room->",o),!0,e.next=7,p.a.get("/Server/Auth/CheckUser/".concat(o)).then((function(e){(200===e.status||"Found"===e.data)&&s(o,n)})).catch((function(e){console.log(e)}));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),s=function(){var e=Object(i.a)(Object(c.a)().mark((function e(t,n){return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.post("/Server/".concat(o,"/Room/add/User/").concat(n),{UserId:t,Name:"Temp User",RoomId:n}).then((function(e){console.log("Added new Member",e.data)})).catch((function(e){console.log("Err in adding Member",e)}));case 2:case"end":return e.stop()}}),e)})));return function(t,o){return e.apply(this,arguments)}}();return Object(m.jsxs)(R.a,{component:"form",sx:{p:"2px 4px",display:"flex",alignItems:"center",maxWidth:400,maxHeight:500,flexFlow:"column wrap",justifyContent:"space-around"},children:[Object(m.jsx)(h.a,{required:!0,id:"ChatWindow-AddUser-TypeArea",label:"Member UserName",defaultValue:"",placeholder:"Member UserName"}),Object(m.jsx)(C.a,{variant:"contained",sx:{marginTop:"8px"},onClick:function(){a()},children:"Add User"})]})}),V=function(e){var t=e.Members,o=e.ActiveRoomId,a=n.useState(""),s=Object(d.a)(a,2),l=s[0],u=s[1],j="Rooms";"QuickUser"===Object(I.g)().UserType&&(j="QuickRoom"),console.log("Room Id Passed to Remove user is ->",o);var g=t;n.useEffect((function(){console.log("search filter is ",l);for(var e=document.getElementById("RemoveMembersList").getElementsByClassName("RemoveMember-Container"),t=0;t<e.length;t++){var o=e[t].getElementsByClassName("RemoveMemberName")[0];console.log("Sub Div in filtering loop",o.childNodes[0].nodeValue);var n=o.childNodes[0].nodeValue;n.toLowerCase().includes(l.toLocaleLowerCase())?(e[t].style.display="",console.log("Element checking for filterting in remove Member",n)):e[t].style.display="none"}}),[l]);var b=0,f="";console.log("in remove Member->"),console.log("Remove Members->",t);var O=Object(I.g)(),v="",x=function(){var e=Object(i.a)(Object(c.a)().mark((function e(){var t;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O.UserName&&(v=O.UserName),console.log(f),t=o,console.log("Deleteing User ",f,"from Room",t),e.next=6,p.a.post("/Server/".concat(j,"/Delete/Member/").concat(o,"/").concat(f)).then((function(e){console.log(e.data);var t=document.getElementById("RemoveMember-SearchArea");t&&(t.value="")})).catch((function(e){console.log(e)}));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(m.jsxs)(R.a,{component:"form",sx:{p:"2px 4px",display:"flex",alignItems:"center",maxWidth:400,flexFlow:"column wrap",justifyContent:"space-around"},children:[Object(m.jsx)(h.a,{required:!0,id:"RemoveMember-SearchArea",label:"Member UserName",defaultValue:"",placeholder:"Member UserName",onChange:function(e){u(e.target.value)}}),Object(m.jsx)("div",{id:"RemoveMembersList",children:Object(m.jsx)(S.a,{sx:{maxHeight:"300px",maxWidth:"300px",overflowX:"scroll",overflowY:"scroll",display:"flex",flexFlow:"column nowrap"},children:Object(r.a)(g.keys()).map((function(e){return++b,Object(m.jsxs)("div",{className:"RemoveMember-Container",id:"RemoveMember".concat(b),onClick:function(){console.log("User",v," is going be deleted from roomID",e),f=e,document.getElementById("RemoveMember-ChatWindow-Output").innerHTML="Remove ".concat(g.get(e).UserId)},children:[Object(m.jsx)("div",{className:"MemberPic",children:Object(m.jsx)("img",{src:g.get(e).Img})}),Object(m.jsx)("div",{className:"RemoveMemberName",children:e})]})}))})}),Object(m.jsx)("p",{id:"RemoveMember-ChatWindow-Output"}),Object(m.jsx)("div",{className:"SubmitRemoveMember",children:Object(m.jsx)(C.a,{variant:"contained",sx:{marginTop:"10px"},onClick:function(){x()},children:"Remove Member"})})]})},z=function(e){var t,o=e.SelectedOption,a=e.Members,s=e.ActiveRoomId;(console.log("Room Id Passed to CHat Window Options Container is ->",s),"Search"===o)?(t=document.getElementById("ChatSearchBarContainer"))&&t.classList.remove("Hide"):(t=document.getElementById("ChatSearchBarContainer"))&&t.classList.add("Hide");n.useEffect((function(){return window.addEventListener("click",(function(){})),function(){window.removeEventListener("click",(function(){console.log("Removed")}))}}),[]);var c=a;return console.log("In Member Open Options->"),console.log("Members passed to Open Options in Member Section are->",a),console.log("IN Open _> Selcted Option is ",o),Object(m.jsxs)("div",{className:"MemberOptions-Wrapper",id:"MemberOptions-Wrapper",children:[Object(m.jsx)("div",{className:"ChatWindow-AddMember-Container"+("Add Member"===o?"":" Hide"),children:Object(m.jsx)(_,{ActiveRoomId:s,Members:c})}),Object(m.jsx)("div",{className:"ChatWindow-RemoveMember-Container"+("Remove Member"===o?"":" Hide"),children:Object(m.jsx)(V,{ActiveRoomId:s,Members:a})})]})},K=function(e){var t=e.Members,o=e.ActiveRoomId;console.log("Room Id Passed to Chat Window Options is ->",o);var a=n.useState("None"),s=Object(d.a)(a,2),c=s[0],i=s[1],r=t;console.log("Members List in Chat Window Options is ",r);var l=n.useState(null),u=Object(d.a)(l,2),j=u[0],g=u[1],b=n.useState(),p=Object(d.a)(b,2),h=p[0],f=p[1];return console.log("In Chat Window Options->"),console.log("Chat Window Members->",t),Object(m.jsxs)("div",{children:[Object(m.jsxs)("div",{children:[Object(m.jsx)(x.a,{"aria-label":"more",id:"long-button","aria-controls":h?"long-menu":void 0,"aria-expanded":h?"true":void 0,"aria-haspopup":"true",onClick:function(e){g(e.currentTarget),console.log("Selected option is ",e),f(!0)},children:Object(m.jsx)(Q.a,{})}),Object(m.jsx)(w.a,{id:"long-menu",MenuListProps:{"aria-labelledby":"long-button"},anchorEl:j,open:h,onClose:function(){g(null),f(!1)},PaperProps:{style:{maxHeight:216,width:"20ch"}},children:["None","Search","Add Member","Remove Member"].map((function(e){return Object(m.jsx)(N.a,{selected:e===j,onClick:function(){i(e),f(!1)},children:e},e)}))})]}),Object(m.jsx)(z,{SelectedOption:c,Members:t,ActiveRoomId:o})]})},q=o(29),G=o(241),J=o(45),X=o.n(J),Y=(o(193),o(145)),Z=o.n(Y),$=o(144),ee=o.n($),te=function(e){var t=e.Media,o=e.Sender,a=e.PostText,s=(e.TimeStamp,e.PostId),c=Object(n.useState)(0),i=Object(d.a)(c,2),r=i[0],l=i[1];Object(n.useEffect)((function(){var e=document.getElementById("Post-Media-Element-".concat(s,"-").concat(r));console.log("element to be scrolled to",e);var t=document.getElementById("Post-MediaHolder-".concat(s));if(e)var o=e.offsetLeft;t.scrollLeft=o}),[r]);var u=t;return u||(u=[]),console.log(u),Object(m.jsxs)("div",{className:"Post-Wrapper",children:[Object(m.jsxs)("div",{className:"Post-Content",children:[Object(m.jsxs)("div",{className:"Post-AvatarAndNameWrapper",children:[Object(m.jsx)("img",{className:"Post-Sender-ProfilePic",src:"https://previews.123rf.com/images/grandeduc/grandeduc1603/grandeduc160300008/54330729-reaper-moon-rising-3d-render-of-cratered-skull-moon-in-night-sky.jpg",alt:"FTLI"}),Object(m.jsx)("p",{className:"Post-Sender-Name",children:o})]}),Object(m.jsx)("div",{className:"Post-TextAndMediaAndName-Holder",children:Object(m.jsxs)("div",{className:"Post-TextAndMedia-Holder",children:[Object(m.jsxs)("div",{className:"Post-MediaHolder",id:"Post-MediaHolder-".concat(s),children:[Object(m.jsx)(ee.a,{sx:{position:"absolute",justifySelf:"end",color:"white",marginLeft:"0px",alignSelf:"center",width:60,height:50,cursor:"pointer"},onClick:function(e){var t=document.getElementById("Post-MediaHolder-".concat(s));t&&(t=t.getElementsByClassName("Post-Media-Element")),console.log("media in post->",t.length),l(0===r?t.length-1:r-1)}}),u.map((function(e,t){return Object(m.jsx)("img",{className:"Post-Media-Element",id:"Post-Media-Element-".concat(s,"-").concat(t),src:e,alt:"Error"},t)})),Object(m.jsx)(Z.a,{sx:{position:"absolute",justifySelf:"end",color:"white",marginLeft:"295px",alignSelf:"center",width:60,height:50,cursor:"pointer"},onClick:function(e){var t=document.getElementById("Post-MediaHolder-".concat(s));console.log("Post-MediaHolder-".concat(s),t),t&&(t=t.getElementsByClassName("Post-Media-Element")),console.log("media in post->",t.length),l((r+1)%t.length)}})]}),Object(m.jsx)("p",{className:"PostText",children:a})]})})]}),Object(m.jsx)("p",{className:"Post-TimeStamp"})]})},oe=(o(200),o(196),o(122)),ne=o.n(oe),ae="",se="",ce=((new E.a.Types.ObjectId).toString(),function(){var e=Object(n.useState)(new Map),t=Object(d.a)(e,2),o=t[0],a=t[1],s=Object(n.useState)(new Map),b=Object(d.a)(s,2),f=b[0],w=b[1],N=Object(n.useState)(),S=Object(d.a)(N,2),y=S[0],M=S[1],C=Object(n.useState)([y]),k=Object(d.a)(C,2),T=(k[0],k[1],Object(n.useState)("Quick")),B=Object(d.a)(T,2),H=(B[0],B[1],Object(n.useState)(1)),A=Object(d.a)(H,2),W=(A[0],A[1],Object(n.useState)("")),F=Object(d.a)(W,2),Q=(F[0],F[1],Object(n.useState)("")),_=Object(d.a)(Q,2),V=(_[0],_[1],Object(n.useState)(new Map)),z=Object(d.a)(V,2),J=z[0],Y=z[1],Z=Object(n.useState)(new Map),$=Object(d.a)(Z,2),ee=$[0],oe=$[1],ce=Object(n.useState)("Both"),ie=Object(d.a)(ce,2),re=ie[0],le=(ie[1],Object(n.useState)("")),de=Object(d.a)(le,2),me=(de[0],de[1],Object(n.useState)(null)),ue=Object(d.a)(me,2),je=(ue[0],ue[1],Object(n.useState)(0)),ge=Object(d.a)(je,2),be=(ge[0],ge[1],Object(n.useState)()),pe=Object(d.a)(be,2),he=pe[0],fe=pe[1],Oe=Object(n.useState)(),ve=Object(d.a)(Oe,2),xe=ve[0],we=ve[1],Ne=Object(n.useState)(),Re=Object(d.a)(Ne,2),Se=Re[0],ye=Re[1],Me=Object(n.useState)(),Ce=Object(d.a)(Me,2),Ie=Ce[0],ke=Ce[1],Ee=Object(n.useState)(),Le=Object(d.a)(Ee,2),Te=Le[0],Be=Le[1],He=Object(n.useState)(),Ae=Object(d.a)(He,2),De=Ae[0],Pe=Ae[1],We=Object(n.useState)(),Ue=Object(d.a)(We,2),Fe=Ue[0],Qe=Ue[1],_e=Object(n.useState)(),Ve=Object(d.a)(_e,2),ze=Ve[0],Ke=Ve[1],qe=Object(n.useState)(),Ge=Object(d.a)(qe,2),Je=(Ge[0],Ge[1],Object(n.useState)(!0)),Xe=Object(d.a)(Je,2),Ye=Xe[0],Ze=Xe[1],$e=Object(n.useState)("MainMessages"),et=Object(d.a)($e,2),tt=et[0],ot=et[1],nt=Object(n.useState)(new Map),at=Object(d.a)(nt,2),st=at[0],ct=at[1],it=Object(n.useState)(new Map),rt=Object(d.a)(it,2),lt=rt[0],dt=rt[1],mt=Object(n.useState)(),ut=Object(d.a)(mt,2),jt=ut[0],gt=ut[1],bt=Object(n.useState)(),pt=Object(d.a)(bt,2),ht=pt[0],ft=pt[1],Ot=Object(n.useState)(new Map),vt=Object(d.a)(Ot,2),xt=vt[0],wt=vt[1],Nt=Object(n.useState)(),Rt=Object(d.a)(Nt,2),St=(Rt[0],Rt[1],Object(n.useState)(new Map)),yt=Object(d.a)(St,2),Mt=yt[0],Ct=yt[1],It=Object(I.g)();ae=It.UserName,(se=ae)||window.location.replace("/Login"),console.log(se,"userName->"),Object(n.useEffect)((function(){var e=localStorage.getItem("User ".concat(se));console.log("fetched from local->"),console.log(e),p.a.get("/Server/Auth/TokenValidate",{headers:{authorization:"Bearer ".concat(e)}}).then((function(e){"TokenVerified"===e.data.resval?console.log("Token Verified"):window.location.replace("/Login"),console.log(e.data)})).catch((function(e){console.log(e)}))}),[]),Object(n.useEffect)((function(){se&&(console.log("Loading Rooms as new Room detected or page loaded->"),p.a.get("/Server/Rooms/Room/load/".concat(se)).then((function(e){console.log("Rooms Loaded",e.data),e.data.forEach((function(e){o.set(e.RoomId,{Status:"Active",Name:e.Name})})),a(new Map(o)),Ke(!0)})).catch((function(e){console.log("Error in Loading rooms",e)})))}),[Se]),Object(n.useEffect)((function(){y&&(Y(new Map(J.clear())),p.a.get("/Server/Rooms/Message/load/".concat(y)).then((function(e){console.log("Messages of room loaded",e.data);var t=e.data;if(t){var o,n=Object(l.a)(t);try{for(n.s();!(o=n.n()).done;){var a=o.value;J.set(a.MessageId,a)}}catch(s){n.e(s)}finally{n.f()}}Y(new Map(J)),Ze(!Ye)})).catch((function(e){console.log("Err in loading messages",e)})),ct(new Map(st.clear())),p.a.get("/Server/Rooms/load/Posts/".concat(y)).then((function(e){console.log("Posts Fetched ->",e.data);var t=e.data;if(t){var o,n=Object(l.a)(t);try{for(n.s();!(o=n.n()).done;){var a=o.value;st.set(a.PostId,a)}}catch(s){n.e(s)}finally{n.f()}}ct(new Map(st))})).catch((function(e){console.log("Error While fetching Posts",e)})),dt(new Map(lt.clear())),p.a.get("/Server/Rooms/Queries/load/".concat(y)).then((function(e){console.log("Queries Fetched ->",e.data);var t=e.data;if(t){var o,n=Object(l.a)(t);try{for(n.s();!(o=n.n()).done;){var a=o.value;lt.set(a.QueryId,a)}}catch(s){n.e(s)}finally{n.f()}}dt(new Map(lt))})).catch((function(e){console.log("Error While fetching Queries",e)})))}),[y]),Object(n.useEffect)((function(){y&&(w(new Map(f.clear())),p.a.get("/Server/Rooms/Members/load/".concat(y)).then((function(e){console.log("Members of room loaded",e.data);var t=e.data;if(t){var o,n=Object(l.a)(t);try{for(n.s();!(o=n.n()).done;){var a=o.value;f.set(a.UserId,a)}}catch(s){n.e(s)}finally{n.f()}}w(new Map(f))})).catch((function(e){console.log("Err in loading members",e)})))}),[y]),Object(n.useEffect)((function(){wt(new Map),p.a.get("/Server/Rooms/GetFullRooms/".concat(se)).then((function(e){console.log("Full Rooms and thier Data Fetched->",e.data),e.data.forEach((function(e){var t=new Map,o=new Map,n=new Map,a=new Map;e.Messages.forEach((function(e){t.set(e.MessageId,e)})),e.Posts.forEach((function(e){o.set(e.PostId,e)})),e.Queries.forEach((function(e){n.set(e.QueryId,e)})),e.Members.forEach((function(e){a.set(e.UserId,e)})),xt.set(e.RoomId,{RoomId:e.RoomId,Name:e.Name,Messages:t,Posts:o,Queries:n,RoomType:e.RoomType,Members:a})})),console.log("Full Room Data is ->",xt),wt(new Map(xt))})).catch((function(e){console.log("Error in fecthing full data of rooms of user->"),console.log(e)}))}),[o]),Object(n.useEffect)((function(){}),[tt]);var kt=Object(n.useState)(null),Et=Object(d.a)(kt,2),Lt=Et[0],Tt=Et[1];console.log("Socket is",Lt),Object(n.useEffect)((function(){Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).fakePort;return console.log("window hostname",window.location.hostname),null===Lt&&Tt(Object(L.a)()),Lt&&Lt.on("connect",(function(){console.log(Lt.id);var e=[];Object(r.a)(o).map((function(t){var o=Object(d.a)(t,2),n=o[0];o[1];return e.push(n)})),e.push(se),console.log(e),Lt.emit("joinRoom",e)})),function(){Lt&&Lt.on("disconnect",(function(){console.log("disccoented"),Lt.removeAllListeners(),Lt.off("connect")}))}}),[ze]),Object(n.useEffect)((function(){return Lt&&(console.log("socket Id is ",Lt.id),Lt.on("update",(function(e){Object.keys(e).includes("MessageId")?(fe(e),we(e),console.log("new  message in socket",e)):Object.keys(e).includes("UserId")?(Qe(e),console.log("new  member in socket",e)):Object.keys(e).includes("PostId")?(gt(e),console.log("new  post in socket",e)):Object.keys(e).includes("QueryId")&&(ft(e),console.log("new  Query in socket",e))})),Lt.on("insert",(function(e){console.log("New Room Detected in Socket",e),e&&Lt.emit("joinRoom",[e.RoomId,se]),ye(e)})),Lt.on("disconnected",(function(e){e&&f.has(e)&&(Mt.delete(e),Ct(new Map(Mt)),console.log("Socket User Left fired",e))})),Lt.on("connected",(function(e){e&&Ct(new Map(Mt.set(e,f.get(e)))),console.log(" USer joined room->",e)})),Lt.on("MemberStatusResponse",(function(e){console.log("Active Members in Room are ",e);new Map;Mt.clear(),Array.isArray(e)&&e.forEach((function(e){Mt.set(e,f.get(e))})),Ct(new Map(Mt))}))),function(){Lt&&(console.log("disccoented"),Lt.removeAllListeners(),Lt.disconnect())}}),[Lt]),Object(n.useEffect)((function(){Lt&&Lt.emit("MemberStatus",y)}),[y]),console.log("Active Members->",Mt);var Bt=function(){var e=Object(i.a)(Object(c.a)().mark((function e(){var t,o,n,a,s,i,r,d,m,u,j;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=J.get("Message-TypeComponent"),console.log("Debugging FileUpload-> New Message->",t),!t||!J.has("Message-TypeComponent")){e.next=21;break}J.delete("Message-TypeComponent"),o=document.getElementById("Message-ImageAttach-Input"),n=document.getElementById("Message-TypeArea").value,a=(new E.a.Types.ObjectId).toString(),n||(n=""),console.log("Debugging FileUpload-> Files->",o.file,o.files),s=new FormData,o&&o.files&&(console.log("Debugging FileUpload-> Files Found->",o.files),i=[],r=o.files,console.log("Debug->",r,Array.isArray(r),Object.keys(r)),Object.keys(r).forEach((function(e){s.append("image",r[e],r[e].path)})),console.log("Debugging FileUpload->  Type of ->"),console.log("Debugging FileUpload-> New Files Array->",i)),d=Date.now(),s.append("Sender",se),s.append("MessageText",n),s.append("MessageId",a),s.append("RoomId",y),s.append("TimeStamp",d),m=Object(l.a)(s.entries());try{for(m.s();!(u=m.n()).done;)j=u.value,console.log("Debug-> FormData->",j[0]+", "+j[1])}catch(c){m.e(c)}finally{m.f()}return e.next=21,p.a.post("/Server/Rooms/Message/add/".concat(y),s,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){console.log("Message Insertion Response->",e),document.getElementById("Message-TypeArea").value=""})).catch((function(e){console.log("Message Insertion Error->",e)}));case 21:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ht=function(){var e=Object(i.a)(Object(c.a)().mark((function e(){var t,o,n,a,s,i,r,d,m,u;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=st.get("Post-TypeComponent"),console.log("Debugging FileUpload-> New Post->",t),!t||!st.has("Post-TypeComponent")){e.next=19;break}st.delete("Post-TypeComponent"),o=document.getElementById("Post-ImageAttach-Input"),n=document.getElementById("Post-TypeArea").value,a=(new E.a.Types.ObjectId).toString(),n||(n=""),console.log("Debugging FileUpload-> Files->",o.files),s=new FormData,o&&o.files&&o.files.length>0&&(console.log("Debugging FileUpload-> Files Found->",o.files),i=[],r=o.files,console.log("Debug->",r,Array.isArray(r),Object.keys(r)),Object.keys(r).forEach((function(e){s.append("image",r[e],r[e].path)})),console.log("Debugging FileUpload->  Type of ->"),console.log("Debugging FileUpload-> New Files Array->",i)),s.append("Sender",se),s.append("PostText",n),s.append("PostId",a),s.append("RoomId",y),d=Object(l.a)(s.entries());try{for(d.s();!(m=d.n()).done;)u=m.value,console.log("Debug-> FormData->",u[0]+", "+u[1])}catch(c){d.e(c)}finally{d.f()}return e.next=19,p.a.post("/Server/Rooms/add/Post/".concat(y),s,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){console.log("Post Insertion Response->",e),document.getElementById("Post-TypeArea").value=""})).catch((function(e){console.log("Post Insertion Error->",e)}));case 19:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){var e=new U.a("d3a40ccf8c32cd64d3ac",{cluster:"ap2",encrypted:!0}),t=e.subscribe("delete");return t.bind("Message",(function(e){console.log("Pusher -> delete message",e),e&&(console.log(y,e.RoomId),e.RoomId===y&&ke(e))})),t.bind("Member",(function(e){console.log("Pusher -> delete member",e),e&&e.RoomId===y&&(console.log("Member deleted"),Be(e))})),t.bind("Room",(function(e){e&&e.UserId===se&&Pe(e)})),function(){e.unsubscribe("delete")}}),[]),Object(n.useEffect)((function(){if(console.log("New Message useEffect fired  ",he),he){console.log("New Message is ",he);var e=he;y===he.RoomId&&Y(new Map(J.set(e.MessageId,e))),he.Sender===se&&Pt(),console.log("After inserting new Message the Full Room Data is ->",xt)}}),[he]),Object(n.useEffect)((function(){if(console.log("New Post useEffect fired  ",he),jt){console.log("New Post is ",jt);var e=jt;y===jt.RoomId&&ct(new Map(st.set(e.PostId,e))),jt.Sender===se&&Pt(),console.log("After inserting new Post the Full Room Data is ->",xt)}}),[jt]),Object(n.useEffect)((function(){if(console.log("New Query useEffect fired  ",he),ht){console.log("New Query is ",ht);var e=ht;y===ht.RoomId&&dt(new Map(lt.set(e.QueryId,e))),ht.Sender===se&&Pt(),console.log("After inserting new Query the Full Room Data is ->",xt)}}),[ht]),Object(n.useEffect)((function(){if(console.log("New LastMessage useEffect fired  ",xe),xe){var e=xe;oe(new Map(ee.set(e.RoomId,e.MessageText)))}}),[xe]),Object(n.useEffect)((function(){if(console.log("New Member useEffect fired  ",Fe),Fe){console.log("New Member is ",Fe);var e=Fe;w(new Map(f.set(e.UserId,e)))}}),[Fe]),Object(n.useEffect)((function(){if(Se){var e=Se;console.log("New Room is",Se),console.log("New Room Id is",e.RoomId),a(new Map(o.set(e.RoomId,{status:"inactive",Name:e.Name})))}}),[Se]),Object(n.useEffect)((function(){if(console.log("delete Message useEffect fired  ",he),Ie&&J.has(Ie.RoomId)){console.log("delete Message is ",Ie);var e=Ie;if(y===e.RoomId)J.delete(e.MessageId),Y(new Map(J))}}),[Ie]),Object(n.useEffect)((function(){if(Te&&f.has(Te.UserId)){var e=Te;if(console.log("testting delete member roomid",y===Te.RoomId),y===e.RoomId)console.log("delete member useEffect fired  ",Te.UserId),f.delete(e.UserId),w(new Map(f))}}),[Te]),Object(n.useEffect)((function(){if(De){console.log("delete room use effect fired for ",De);var e=De;if(o.has(e.RoomId))o.delete(e.RoomId),a(new Map(o))}}),[De]),Object(n.useEffect)((function(){return window.addEventListener("resize",(function(e){console.log("Debug Active Window fired-> current window",re);var t=window.innerWidth,o=(window.innerHeight,document.getElementById("Room-Container-Wrapper")),n=this.document.getElementById("Chat-Container-Wrapper");t<=600?(console.log("Debug Active Window -> Active Window now chatwindow -> width<600px && window===both"),o&&!o.classList.contains("Hide")&&n&&!n.classList.contains("Hide")&&o.classList.add("Hide")):t>600&&(o&&o.classList.contains("Hide")&&o.classList.remove("Hide"),n&&n.classList.contains("Hide")&&n.classList.remove("Hide"),console.log("Debug Active Window -> Active Window now Both -> width>600px"))})),function(){window.removeEventListener("resize",(function(){}))}}),[]),console.log("Debug -> Active Window =",re),console.log("Members before rendering are",f),console.log("Rooms before rendering are",o);var At;console.log(ee);var Dt=Object(n.useRef)(null),Pt=function(){var e;null===(e=Dt.current)||void 0===e||e.scrollIntoView({behavior:"smooth"}),document.getElementById("MessagesScrollDownDiv").scrollIntoView(!1)};Object(n.useEffect)((function(){Pt()}),[Ye]);var Wt=function(e,t){if(e){var o=e.offsetTop;t&&(t.scrollTop=o)}};return Object(m.jsxs)("div",{className:"ContentWrapper",children:[Object(m.jsx)("div",{className:"Room-container-Wrapper"+("ChatWindow"===re?" Hide":""),id:"Room-Container-Wrapper",children:Object(m.jsxs)("div",{className:"Room-container",children:[Object(m.jsxs)("div",{className:"Room-Header-Wrapper",children:[Object(m.jsx)("div",{className:"Room-Header-scopeSwitch",children:Object(m.jsx)(u,{})}),Object(m.jsx)("div",{className:"Room-Header-contents",children:Object(m.jsxs)(R.a,{component:"form",sx:{p:"2px 4px",display:"flex",alignItems:"center",width:"89%"},children:[Object(m.jsxs)("div",{className:"RoomSearchBarContainer",id:"RoomSearchBarContainer",children:[Object(m.jsx)(q.c,{id:"RoomSearchBar",onChange:function(e){!function(){var e=document.getElementById("RoomSearchBar").value;console.log("search filter is ",e);var t=document.getElementById("Room-Window");t=t.getElementsByClassName("RoomComponentWrapperDiv"),console.log("Rooms list for litering are->",t);for(var o=0;o<t.length;o++){var n=t[o].getElementsByClassName("User-ProfileName")[0];console.log("Sub Div in filtering loop",n.childNodes[0].nodeValue);var a=n.childNodes[0].nodeValue;a.toLowerCase().includes(e.toLocaleLowerCase())?(t[o].style.display="",console.log("Element checking for filterting in remove Room",a)):t[o].style.display="none"}}()},sx:{ml:1,flex:1},placeholder:"Search Rooms",inputProps:{"aria-label":"Search Rooms"}}),Object(m.jsx)(x.a,{sx:{p:"10px",flex:.3},"aria-label":"search",children:Object(m.jsx)(X.a,{})})]}),Object(m.jsx)(G.a,{sx:{height:28,m:.5},orientation:"vertical"}),Object(m.jsx)(P,{Rooms:o,socket:Lt})]})})]}),Object(m.jsx)("div",{className:"Room-Window-Wrapper",children:Object(m.jsx)("div",{className:"Room-Window",id:"Room-Window",children:Object(r.a)(o.keys()).map((function(e){return Object(m.jsx)("div",{className:"RoomComponentWrapperDiv",id:"RoomComponentWrapperDiv",onClick:function(){M(e),document.getElementById("Chat-Header-Details-Name").innerHTML=o.get(e).Name,At=document.body.clientWidth;var t=document.getElementById("Room-Container-Wrapper"),n=document.getElementById("Chat-Container-Wrapper");console.log("Active RoomID is ",y,e,y===e),At<=600&&(n&&n.classList.contains("Hide")&&n.classList.remove("Hide"),t&&!t.classList.contains("Hide")&&t.classList.add("Hide"))},children:Object(m.jsx)(j,{ProfileName:o.get(e).Name,LastMessage:ee.get(e)})})}))})})]})}),Object(m.jsx)("div",{className:"Chat-container-Wrapper"+("RoomWindow"===re?" Hide":""),id:"Chat-Container-Wrapper",children:Object(m.jsxs)("div",{className:"Chat-Container",children:[Object(m.jsx)("div",{className:"Chat-Header-Wrapper",children:Object(m.jsxs)("div",{className:"Chat-Header",children:[Object(m.jsx)("div",{className:"backArrow-ChatHeader",children:Object(m.jsx)(O.a,{className:"BackArrow-ChatWindow BackArrowRes backArrow-ChatHeader",onClick:function(){var e=document.getElementById("Room-Container-Wrapper"),t=document.getElementById("Chat-Container-Wrapper");document.body.clientWidth<=600&&(e&&e.classList.contains("Hide")&&e.classList.remove("Hide"),t&&!t.classList.contains("Hide")&&t.classList.add("Hide"))},sx:{width:"40px",height:"30px"}})}),Object(m.jsxs)("div",{className:"RoomDetails-Wrapper-ChatHeader",onClick:function(e){console.log("Debug Window-> Room Clicked ");var t=document.getElementById("Chat-Container-Wrapper");if(t){t.classList.add("Hide");var o=document.getElementById("RoomDetails-FullDetails");o&&o.classList.remove("Hide")}},children:[Object(m.jsx)("img",{className:"RoomDetails-Avatar-ChatHeader",src:"",alt:"error"}),Object(m.jsx)("div",{className:"RoomDetails-Name-ChatHeader",id:"Chat-Header-Details-Name"})]}),Object(m.jsxs)("div",{className:"RoomOptions-ChatHeader",children:[Object(m.jsx)("div",{className:"RoomDetails-ChatHeader"}),Object(m.jsx)("div",{className:"Search-ChatHeader",children:Object(m.jsxs)(R.a,{component:"form",sx:{p:"2px 4px",display:"flex",alignItems:"center",width:"89%",marginRight:"5vw"},children:[Object(m.jsxs)("div",{className:"ChatSearchBarContainer",id:"ChatSearchBarContainer",children:[Object(m.jsx)(q.c,{id:"ChatSearchBar",onChange:function(){},sx:{ml:1,flex:.8},placeholder:"Search Chat",inputProps:{"aria-label":"Search Chat"}}),Object(m.jsx)(x.a,{sx:{p:"10px",flex:.3},"aria-label":"search",children:Object(m.jsx)(X.a,{})})]}),Object(m.jsx)(G.a,{sx:{height:28,m:.5},orientation:"vertical"}),Object(m.jsx)(K,{Members:f,ActiveRoomId:y}),Object(m.jsx)(G.a,{sx:{height:28,m:.5},orientation:"vertical"}),Object(m.jsx)(D.a,{onClick:function(e){var t=document.getElementById("ChatDisplayTypes-Container");t&&(t.classList.contains("Hide")?t.classList.remove("Hide"):t.classList.add("Hide"))},sx:{cursor:"pointer"},id:"MenuIcon-ChatHeader-OtherDataOptions",className:"MenuIcon-ChatHeader-OtherDataOptions"})]})}),console.log("Active Room id is->",y)]})]})}),Object(m.jsxs)("div",{className:"Chat-Box-Wrapper",children:[Object(m.jsxs)("div",{className:"Chat-Box"+("MainMessages"===tt?" MessageChatBox":" Hide"),id:"ChatBox-Messages-Id",children:[console.log(J.size),Object(r.a)(J.keys()).map((function(e){var t=new Date(J.get(e).TimeStamp);return t=t.toString().split(" "),console.log("Time parts",t),t=t[1]+" "+t[2]+" "+t[3]+" "+t[4],Object(m.jsx)(g,{own:J.get(e).Sender===se,MessageText:J.get(e).MessageText,Name:J.get(e).Sender,TimeStamp:t,Media:J.get(e).Media})})),Object(m.jsx)("div",{ref:Dt,id:"MessagesScrollDownDiv"})]}),Object(m.jsxs)("div",{className:"Chat-Box"+("MainPosts"===tt?" PostChatBox":" Hide"),id:"ChatBox-Posts-Id",children:[Object(r.a)(st.keys()).map((function(e){var t=new Date(st.get(e).TimeStamp);return t=t.toString().split(" "),console.log("Time parts",t),t=t[1]+" "+t[2]+" "+t[3]+" "+t[4],Object(m.jsx)(te,{Sender:st.get(e).Sender,Media:st.get(e).Media,TimeStamp:t,PostText:st.get(e).PostText,PostId:e})})),Object(m.jsx)("div",{ref:Dt,id:"PostsScrollDownDiv"})]}),Object(m.jsxs)("div",{className:"Chat-Box"+("MainQueries"===tt?" QueryChatBox":" Hide"),id:"ChatBox-Queries-Id",children:[console.log(J.size),Object(r.a)(J.keys()).map((function(e){var t=new Date(J.get(e).TimeStamp);return t=t.toString(),Object(m.jsx)(g,{own:J.get(e).Sender===se,MessageText:J.get(e).MessageText,Name:J.get(e).Sender,TimeStamp:t})})),Object(m.jsx)("div",{ref:Dt,id:"QueriesScrollDownDiv"})]}),Object(m.jsxs)("div",{className:"Members-Wrapper-ChatContainer",children:[Object(m.jsx)("p",{className:"WhiteTextOnDarkBG H2",children:"Members:  "}),Object(m.jsxs)("div",{className:"MembersList-ChatContainer",children:[Object(r.a)(Mt.keys()).map((function(e){return f.has(e)?Object(m.jsxs)("div",{className:"MemberWrapper-ChatContainer",children:[Object(m.jsx)("div",{className:"MemberName-ChatContainer ActiveMember-Online",children:e}),Object(m.jsx)("div",{className:"MemberStatus-ChatContainer"})]}):null})),Object(r.a)(f.keys()).map((function(e){return Mt.has(e)?null:Object(m.jsxs)("div",{className:"MemberWrapper-ChatContainer",children:[Object(m.jsx)("div",{className:"MemberName-ChatContainer",children:e}),Object(m.jsx)("div",{className:"MemberStatus-ChatContainer"})]})}))]})]})]}),Object(m.jsxs)("div",{className:"TypeArea"+("MainMessages"===tt?"":" Hide"),children:[Object(m.jsx)("div",{className:"TypeBox-Container",children:Object(m.jsx)(h.a,{id:"Message-TypeArea",label:"Message",placeholder:"Message",multiline:!0,maxRows:3,onChange:function(e){var t=document.getElementById("Message-TypeArea").value;if(t.length>0){var o=document.getElementById("Message-ImageAttach-Input"),n=[];o&&o.files&&Object.keys(o.files).length>0&&Object.keys(o.files).forEach((function(e){console.log("Debug MessageMedia->",o.files[e],o.files),n.push(URL.createObjectURL(o.files[e]))})),Y(new Map(J.set("Message-TypeComponent",{Sender:se,MessageText:t,Media:n,TimeStamp:Date.now().toString()})))}else J.delete("Message-TypeComponent"),Y(new Map(J));Wt(document.getElementById("MessagesScrollDownDiv"),document.getElementById("ChatBox-Messages-Id"))},onKeyPress:function(e){"Enter"===e.key&&e.shiftKey&&(Bt(),e.preventDefault())},sx:{width:"90%",margin:"10px",maxWidth:"700px",boxShadow:4}})}),Object(m.jsxs)("div",{className:"TypeArea-SendButton",children:[Object(m.jsx)(v.a,{className:"Chat-SendButton",onClick:function(){var e=document.getElementById("Message-TypeArea").value;console.log("Submitted Message  is ",e),e.length>0?Bt():alert("Type atleast 1 Letter")}}),Object(m.jsxs)("label",{htmlFor:"Message-ImageAttach-Input",children:[Object(m.jsx)("input",{accept:"image/*",id:"Message-ImageAttach-Input",multiple:!0,type:"file",className:"AttachFile-InputBar",onChange:function(e){var t=document.getElementById("Message-TypeArea").value;if(t.length>0){var o=document.getElementById("Message-ImageAttach-Input"),n=[];o&&o.files&&Object.keys(o.files).length>0&&Object.keys(o.files).forEach((function(e){console.log("Debug MessageMedia->",o.files[e],o.files),n.push(URL.createObjectURL(o.files[e]))})),Y(new Map(J.set("Message-TypeComponent",{Sender:se,MessageText:t,Media:n,TimeStamp:Date.now().toString()})))}else J.delete("Message-TypeComponent"),Y(new Map(J));Wt(document.getElementById("MessagesScrollDownDiv"),document.getElementById("ChatBox-Messages-Id"))}}),Object(m.jsx)(ne.a,{sx:{width:"40px",height:"35px",cursor:"pointer"}})]})]})]}),Object(m.jsxs)("div",{className:"TypeArea"+("MainPosts"===tt?"":" Hide"),children:[Object(m.jsx)("div",{className:"TypeBox-Container",children:Object(m.jsx)(h.a,{id:"Post-TypeArea",label:"Post",placeholder:"Post",multiline:!0,maxRows:3,onChange:function(e){var t=document.getElementById("Post-TypeArea").value;if(t.length>0){var o=document.getElementById("Post-ImageAttach-Input"),n=[];o&&o.files&&Object.keys(o.files).length>0&&Object.keys(o.files).forEach((function(e){console.log("Debug PostMedia->",o.files[e],o.files),n.push(URL.createObjectURL(o.files[e]))})),ct(new Map(st.set("Post-TypeComponent",{Sender:se,PostText:t,Media:n,TimeStamp:Date.now().toString()})))}else st.delete("Post-TypeComponent"),ct(new Map(st));Wt(document.getElementById("PostsScrollDownDiv"),document.getElementById("ChatBox-Posts-Id"))},onKeyPress:function(e){"Enter"===e.key&&e.shiftKey&&(Ht(),e.preventDefault())},sx:{margin:"10px",width:"70vw",boxShadow:4}})}),Object(m.jsxs)("div",{className:"TypeArea-SendButton",children:[Object(m.jsx)(v.a,{className:"Chat-SendButton",onClick:function(){var e=document.getElementById("Post-TypeArea").value;console.log("Submitted Post  is ",e),e.length>0?Ht():alert("Type atleast 1 Letter")}}),Object(m.jsxs)("label",{htmlFor:"Post-ImageAttach-Input",children:[Object(m.jsx)("input",{accept:"image/*",id:"Post-ImageAttach-Input",multiple:!0,type:"file",className:"AttachFile-InputBar",onChange:function(e){var t=document.getElementById("Post-TypeArea").value;if(t.length>0){var o=document.getElementById("Post-ImageAttach-Input"),n=[];o&&o.files&&Object.keys(o.files).length>0&&Object.keys(o.files).forEach((function(e){console.log("Debug PostMedia->",o.files[e],o.files),n.push(URL.createObjectURL(o.files[e]))})),ct(new Map(st.set("Post-TypeComponent",{Sender:se,PostText:t,Media:n,TimeStamp:Date.now().toString()})))}else st.delete("Post-TypeComponent"),ct(new Map(st));Wt(document.getElementById("PostsScrollDownDiv"),document.getElementById("ChatBox-Posts-Id"))}}),Object(m.jsx)(ne.a,{sx:{width:"40px",height:"35px",cursor:"pointer"}})]})]})]}),Object(m.jsxs)("div",{className:"TypeArea"+("MainQueries"===tt?"":" Hide"),children:[Object(m.jsx)("div",{className:"TypeBox-Container",children:Object(m.jsx)(h.a,{id:"Query-TypeArea",label:"Query",placeholder:"Query",multiline:!0,maxRows:3,onKeyPress:function(e){"Enter"===e.key&&e.shiftKey&&(Bt(),e.preventDefault())},sx:{width:"90%",margin:"10px",maxWidth:"700px",boxShadow:4}})}),Object(m.jsx)("div",{className:"TypeArea-SendButton",children:Object(m.jsx)(v.a,{className:"Chat-SendButton",onClick:function(){var e=document.getElementById("Message-TypeArea").value;console.log("Submitted Message  is ",e),e.length>0?Bt():alert("Type atleast 1 Letter")}})})]})]})}),Object(m.jsxs)("div",{className:"RoomDetails-FullDetails Hide",id:"RoomDetails-FullDetails",children:[Object(m.jsx)("div",{className:"RoomInside-DetailsHeader",children:Object(m.jsx)(O.a,{className:"BackArrow-ChatWindow BackArrowRes backArrow-ChatHeader",onClick:function(){console.log("debug window-> back arrow clicked->");var e=document.getElementById("RoomDetails-FullDetails");e&&e.classList.add("Hide"),(e=document.getElementById("Chat-Container-Wrapper"))&&e.classList.remove("Hide")},sx:{width:"40px",height:"30px"}})}),"Members :",Object(m.jsxs)("div",{className:"RoomInside-MembersList",children:[Object(r.a)(Mt.keys()).map((function(e){return f.has(e)?Object(m.jsxs)("div",{className:"Member-InsideDetailsList-Wrapper",children:[Object(m.jsx)("img",{className:"MemberAvatar-InsideDetailsList",src:"",alt:"error"}),Object(m.jsx)("div",{className:"MemberName-InsideDetailsList ActiveMember-Online",children:e})]}):null})),Object(r.a)(f.keys()).map((function(e){return Mt.has(e)?null:Object(m.jsxs)("div",{className:"Member-InsideDetailsList-Wrapper",children:[Object(m.jsx)("img",{className:"MemberAvatar-InsideDetailsList",src:"",alt:"error"}),Object(m.jsx)("div",{className:"MemberName-InsideDetailsList",children:e})]})}))]})]}),Object(m.jsxs)("div",{className:"ChatDisplayTypes-Container Hide",id:"ChatDisplayTypes-Container",children:["____Room Board",Object(m.jsxs)("div",{className:"Fit-Text Container NoOverFlow ChatDisplayTypes-TypeHolder",children:[Object(m.jsx)("p",{className:"NormalHeader NoOverFlow",children:"Messages"}),Object(m.jsx)("div",{className:"SubContentsListContainer",children:Object(m.jsx)("div",{className:"SubContentName Highlight5",onClick:function(e){var t=document.getElementById("ChatDisplayTypes-Container");t&&(t.classList.contains("Hide")||t.classList.add("Hide")),ot("MainMessages")},children:"Main Messages"})})]}),Object(m.jsxs)("div",{className:"Fit-Text Container NoOverFlow ChatDisplayTypes-TypeHolder",children:[Object(m.jsx)("p",{className:"NormalHeader NoOverFlow",children:"Posts"}),Object(m.jsx)("div",{className:"SubContentsListContainer",children:Object(m.jsx)("div",{className:"SubContentName Highlight5",onClick:function(e){var t=document.getElementById("ChatDisplayTypes-Container");t&&(t.classList.contains("Hide")||t.classList.add("Hide")),ot("MainPosts")},children:"Main Posts"})})]}),Object(m.jsxs)("div",{className:"Fit-Text Container NoOverFlow ChatDisplayTypes-TypeHolder",children:[Object(m.jsx)("p",{className:"NormalHeader NoOverFlow",children:"Queries"}),Object(m.jsx)("div",{className:"SubContentsListContainer",children:Object(m.jsx)("div",{className:"SubContentName Highlight5",onClick:function(e){var t=document.getElementById("ChatDisplayTypes-Container");t&&(t.classList.contains("Hide")||t.classList.add("Hide")),ot("MainQueries")},children:"Main Queries"})})]})]})]})}),ie=(o(197),function(){var e=new Map;return e.set(5,[4]),e.get(5).push(8),console.log("Debug MAp",e.get(5)),console.log("In Home Page"),Object(m.jsx)("div",{className:"Home-Wrapper",children:Object(m.jsx)("div",{className:"Home-Page",children:Object(m.jsx)("div",{className:"Login-Wrapper",children:Object(m.jsx)("div",{className:"Login-Container",children:"Home"})})})})}),re=(o(137),o(100)),le=o(101),de=o(102),me=function(){var e=Object(n.useState)(""),t=Object(d.a)(e,2),o=t[0],a=t[1],s=Object(n.useState)(""),r=Object(d.a)(s,2),l=r[0],u=r[1],j=Object(n.useState)(""),g=Object(d.a)(j,2),b=(g[0],g[1],Object(n.useState)("NotValid")),f=Object(d.a)(b,2),O=(f[0],f[1],Object(n.useState)("")),v=Object(d.a)(O,2),x=(v[0],v[1]),w=Object(n.useState)(""),N=Object(d.a)(w,2),R=N[0],S=N[1],y=Object(n.useState)(""),M=Object(d.a)(y,2);M[0],M[1];function I(){return(I=Object(i.a)(Object(c.a)().mark((function e(t){var n,a;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(o),console.log("Password is ",l),n="",e.next=5,p.a.post("/Server/Auth/User/Login",{UserName:o,Password:l}).then((function(e){console.log(e.data),("string"===typeof e.data.resval||e.data.resval instanceof String)&&x(e.data.resval);var t=e.data.token;if(t){console.log("token from login->"),console.log(e.data.token);try{console.log(o),localStorage.setItem("User ".concat(o),t)}catch(a){console.log("error->"),console.log(a)}S(localStorage.getItem("User ".concat(o)))}e.data.resval&&x(e.data.resval),n=e.data.resval,console.log(R)})).catch((function(e){console.log("error while Logging in"),console.log(e)}));case 5:if(a=localStorage.getItem("User ".concat(o)),console.log("fetched from local->"),console.log(a),!a||"Matched"!==n){e.next=11;break}return e.next=11,p.a.get("/Server/Auth/TokenValidate",{headers:{authorization:"Bearer ".concat(a)}}).then((function(e){"TokenVerified"===e.data.resval&&window.location.replace("/Account/".concat(o)),console.log(e.data)})).catch((function(e){console.log(e)}));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}console.log("state after token validation "),console.log(R);var k=function(){var e=Object(i.a)(Object(c.a)().mark((function e(){var t,o,n;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=(t=(new E.a.Types.ObjectId).toString()).toString(),(o=document.getElementById("QuickRoom-Login"))&&(o=o.value),(n=document.getElementById("QuickRoom--UsersName-Login"))&&(n=n.value),o.length<1||n.length<1?document.getElementById("Login-HelperText-QuickRoom").innerHTML="Name and RoomId should be atLeast 1 length long":window.location.replace("QuickRoom/QuickUser/".concat(o,"/").concat(t,"/").concat(n));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){var e=document.getElementById("QuickRoom-LoginButton");document.addEventListener("click",(function(t){var o=document.getElementById("QuickRoom-Login-Div");console.log("Event of click->",t),t.target===o||o.contains(t.target)||t.target===e||(console.log("Detected click outside quick room div"),o&&!o.classList.contains("Hide")&&o.classList.add("Hide"))}))}),[]),Object(m.jsxs)("div",{className:"LoginPage-Wrapper",children:[Object(m.jsx)("div",{className:"Login-Wrapper",children:Object(m.jsxs)("div",{className:"Login-Container",children:[Object(m.jsxs)("div",{className:"User-Pass-Container",children:[Object(m.jsx)(h.a,{id:"outlined-basic",label:"UserName",variant:"outlined",onChange:function(e){!function(e){a(e.target.value),console.log(o)}(e)},inputProps:{style:{fontSize:18,wordSpacing:17,lineHeight:1.5}},InputLabelProps:{style:{fontSize:18,wordSpacing:17,lineHeight:1.5}},sx:{boxShadow:4}}),Object(m.jsx)(h.a,{id:"outlined-password-input",label:"Password",type:"password",inputProps:{style:{fontSize:18,wordSpacing:17,lineHeight:1.5}},InputLabelProps:{style:{fontSize:18,wordSpacing:17,lineHeight:1.5}},onChange:function(e){!function(e){u(e.target.value),console.log(o)}(e)},sx:{boxShadow:4}})]}),Object(m.jsxs)("div",{className:"Login-Options",children:[Object(m.jsx)(re.a,{className:"LoginOption-Icons"}),Object(m.jsx)(le.a,{className:"LoginOption-Icons"}),Object(m.jsx)(de.a,{className:"LoginOption-Icons"})]}),Object(m.jsxs)("div",{className:"OtherRoom-Wrapper",children:[Object(m.jsxs)("div",{className:"QuickRoom-Container",children:[Object(m.jsx)(C.a,{variant:"text",id:"QuickRoom-LoginButton",onClick:function(){var e=document.getElementById("QuickRoom-Login-Div");e&&(e.style.position="fixed",e.classList.remove("Hide"))},children:"Quick Room"}),Object(m.jsxs)("div",{className:"Hide Show-Login",id:"QuickRoom-Login-Div",children:[Object(m.jsx)(h.a,{id:"QuickRoom-Login",label:"Quick Room ID",type:"search",variant:"standard",className:"QuickRoom-Login"}),Object(m.jsx)(h.a,{id:"QuickRoom--UsersName-Login",label:"User Name",type:"search",variant:"standard",className:"QuickRoom-Login"}),Object(m.jsx)(C.a,{variant:"contained",id:"QuickLogin-Button",className:"LoginSubmit",onClick:function(e){var t=document.getElementById("QuickRoom-Login");t&&(t=t.value);var o=document.getElementById("QuickRoom--UsersName-Login");o&&(o=o.value),t.length<1||t.length>20?document.getElementById("Login-HelperText-QuickRoom").innerHTML="Length Of Room Id should be >1 and <21":o.length<1||o.length>20?document.getElementById("Login-HelperText-QuickRoom").innerHTML="Length Of User Name should be >1 and <28":k(e)},sx:{width:"120px",height:"60px"},children:"Join Quick room"}),Object(m.jsx)("p",{id:"Login-HelperText-QuickRoom"})]})]}),Object(m.jsxs)("div",{className:"SavedRoom-Container",children:[Object(m.jsx)(C.a,{variant:"text",id:"SavedRoom-LoginButton",onClick:function(){document.getElementById("SavedRoom-Login-Div").classList.add("Show"),document.getElementById("SavedRoom-LoginButton").style.display="none"},children:"Saved Room"}),Object(m.jsxs)("div",{className:"Hide",id:"SavedRoom-Login-Div",children:[Object(m.jsx)(h.a,{id:"SavedRoom-Login",label:"Saved Room ID",type:"search",variant:"standard",className:"SavedRoom-Login"}),"  "]})]})]})]})}),Object(m.jsx)("div",{className:"LoginSubmit-Div",children:Object(m.jsx)(C.a,{variant:"contained",className:"LoginSubmit",onClick:function(e){o.length<1||o.length>20?document.getElementById("Login-HelperText-Overall").innerHTML="Length Of UserName should be >1 and <21":l.length<1||l.length>20?document.getElementById("Login-HelperText-Overall").innerHTML="Length Of Password should be >1 and <28":function(e){I.apply(this,arguments)}(e)},children:"Login"})}),Object(m.jsx)("p",{id:"Login-HelperText-Overall"}),Object(m.jsx)(C.a,{variant:"contained",className:"SignUp-Button",onClick:function(){window.location.replace("/SignUp")},sx:{marginTop:"4vh"},children:"SignUp"})]})},ue=function(){var e=Object(n.useState)(""),t=Object(d.a)(e,2),o=t[0],a=t[1],s=Object(n.useState)(""),r=Object(d.a)(s,2),l=r[0],u=r[1],j=Object(n.useState)(""),g=Object(d.a)(j,2),b=(g[0],g[1],Object(n.useState)("NotValid")),f=Object(d.a)(b,2),O=(f[0],f[1],Object(n.useState)("")),v=Object(d.a)(O,2),x=v[0],w=v[1],N=Object(n.useState)(""),R=Object(d.a)(N,2);R[0],R[1];function S(){return S=Object(i.a)(Object(c.a)().mark((function e(t){var n;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(o),console.log("Password is ",l),"",e.next=5,p.a.post("/Server/Auth/User/SignUp",{UserName:o,Password:l}).then((function(e){console.log(e.data),("string"===typeof e.data||e.data instanceof String)&&w(e.data),console.log("response is ",x);var t=e.data.AccessToken;t&&localStorage.setItem("User ".concat(o),t),e.data.resval&&w(e.data.resval);var n=localStorage.getItem("USer ".concat(o));console.log(n)})).catch((function(e){console.log("error while Signing Up"),console.log(e)}));case 5:return n=localStorage.getItem("User ".concat(o)),console.log("fetched from local->"),console.log(n),e.next=10,p.a.get("/Server/Auth/TokenValidate",{headers:{authorization:"Bearer ".concat(n)}}).then((function(e){"TokenVerified"===e.data.resval&&window.location.replace("/Account/".concat(o)),console.log(e.data)})).catch((function(e){console.log(e)}));case 10:case"end":return e.stop()}}),e)}))),S.apply(this,arguments)}return Object(m.jsx)("div",{className:"LoginPage-OverAll",children:Object(m.jsxs)("div",{className:"LoginPage-Wrapper",children:[Object(m.jsx)("div",{className:"Login-Wrapper",children:Object(m.jsxs)("div",{className:"Login-Container",children:[Object(m.jsxs)("div",{className:"User-Pass-Container",children:[Object(m.jsx)(h.a,{id:"outlined-basic",label:"UserName",variant:"outlined",onChange:function(e){!function(e){a(e.target.value),console.log(o)}(e)},inputProps:{style:{fontSize:18,wordSpacing:17,lineHeight:1.5}},InputLabelProps:{style:{fontSize:18,wordSpacing:17,lineHeight:1.5}},sx:{boxShadow:4}}),Object(m.jsx)(h.a,{id:"outlined-password-input",label:"Password",type:"password",inputProps:{style:{fontSize:18,wordSpacing:17,lineHeight:1.5}},InputLabelProps:{style:{fontSize:18,wordSpacing:17,lineHeight:1.5}},onChange:function(e){!function(e){u(e.target.value),console.log(o)}(e)},sx:{boxShadow:4}})]}),Object(m.jsxs)("div",{className:"Login-Options",children:[Object(m.jsx)(re.a,{className:"LoginOption-Icons"}),Object(m.jsx)(le.a,{className:"LoginOption-Icons"}),Object(m.jsx)(de.a,{className:"LoginOption-Icons"})]})]})}),Object(m.jsx)("div",{className:"LoginSubmit-Div",children:Object(m.jsx)(C.a,{variant:"contained",className:"LoginSubmit",onClick:function(e){!function(e){S.apply(this,arguments)}(e)},children:"SignUp"})})]})})},je="",ge="",be=((new E.a.Types.ObjectId).toString(),function(){var e=Object(n.useState)(new Map),t=Object(d.a)(e,2),o=t[0],a=t[1],s=Object(n.useState)(new Map),b=Object(d.a)(s,2),f=b[0],w=b[1],N=Object(n.useState)(),S=Object(d.a)(N,2),y=S[0],M=S[1],C=Object(n.useState)([y]),k=Object(d.a)(C,2),T=(k[0],k[1],Object(n.useState)("Quick")),B=Object(d.a)(T,2),H=(B[0],B[1],Object(n.useState)(1)),A=Object(d.a)(H,2),D=(A[0],A[1],Object(n.useState)("")),P=Object(d.a)(D,2),W=(P[0],P[1],Object(n.useState)(new Map)),F=Object(d.a)(W,2),Q=F[0],_=F[1],V=Object(n.useState)(new Map),z=Object(d.a)(V,2),J=z[0],Y=z[1],Z=Object(n.useState)("Both"),$=Object(d.a)(Z,2),ee=$[0],te=$[1],oe=Object(n.useState)(""),ne=Object(d.a)(oe,2),ae=(ne[0],ne[1],Object(n.useState)(null)),se=Object(d.a)(ae,2),ce=(se[0],se[1],Object(n.useState)(0)),ie=Object(d.a)(ce,2),re=(ie[0],ie[1],Object(n.useState)()),le=Object(d.a)(re,2),de=le[0],me=le[1],ue=Object(n.useState)(),be=Object(d.a)(ue,2),pe=be[0],he=be[1],fe=Object(n.useState)(),Oe=Object(d.a)(fe,2),ve=Oe[0],xe=Oe[1],we=Object(n.useState)(),Ne=Object(d.a)(we,2),Re=Ne[0],Se=Ne[1],ye=Object(n.useState)(),Me=Object(d.a)(ye,2),Ce=Me[0],Ie=Me[1],ke=Object(n.useState)(),Ee=Object(d.a)(ke,2),Le=Ee[0],Te=Ee[1],Be=Object(n.useState)(),He=Object(d.a)(Be,2),Ae=He[0],De=He[1],Pe=Object(n.useState)(),We=Object(d.a)(Pe,2),Ue=We[0],Fe=We[1],Qe=Object(n.useState)(),_e=Object(d.a)(Qe,2),Ve=(_e[0],_e[1],Object(n.useState)(!0)),ze=Object(d.a)(Ve,2),Ke=ze[0],qe=ze[1],Ge=Object(n.useState)(),Je=Object(d.a)(Ge,2),Xe=(Je[0],Je[1],Object(n.useState)(new Map)),Ye=Object(d.a)(Xe,2),Ze=Ye[0],$e=Ye[1],et=Object(n.useState)(0),tt=Object(d.a)(et,2),ot=tt[0],nt=tt[1],at=Object(n.useState)(!1),st=Object(d.a)(at,2),ct=(st[0],st[1]),it=Object(I.g)(),rt=Object(n.useState)(null),lt=Object(d.a)(rt,2),dt=lt[0],mt=lt[1];je=it.UserId,console.log(it),(ge=je)||(console.log("UserName not found"),window.location.replace("/Login")),console.log(ge,"userName->");var ut=it.RoomId,jt=it.Name;Object(n.useEffect)((function(){ut&&p.a.get("/Server/QuickRoom/RoomInitial/".concat(ut)).then((function(e){console.log("Result from QUick Room Check->",e.data),"Found"===e.data.Status?(a(new Map(o.set(e.data.Rooms.RoomId,{Status:"Active",Name:e.data.Rooms.Name}))),console.log("Quick Room Exists",e.data.Rooms),Fe(!0),M(ut)):(gt(),console.log("Quick Room Not Found Creating New->",ut))})).catch((function(e){console.log("Error in QUick Room Initialization->"),console.log(e)}))}),[]),Object(n.useEffect)((function(){y&&(_(new Map(Q.clear())),p.a.get("/Server/QuickRoom/Message/load/".concat(y)).then((function(e){console.log("Messages of room loaded",e.data);var t=e.data;if(t){var o,n=Object(l.a)(t);try{for(n.s();!(o=n.n()).done;){var a=o.value;Q.set(a.MessageId,a)}}catch(s){n.e(s)}finally{n.f()}}_(new Map(Q)),qe(!Ke)})).catch((function(e){console.log("Err in loading messages",e)})))}),[y]),Object(n.useEffect)((function(){y&&(w(new Map(f.clear())),p.a.get("/Server/QuickRoom/Members/load/".concat(y)).then((function(e){console.log("Members of room loaded",e.data);var t=e.data;if(t){var o,n=Object(l.a)(t);try{for(n.s();!(o=n.n()).done;){var a=o.value;f.set(a.UserId,a)}}catch(s){n.e(s)}finally{n.f()}}f.has(ge)||pt(),w(new Map(f))})).catch((function(e){console.log("Err in loading members",e)})))}),[y]);var gt=function(){var e=Object(i.a)(Object(c.a)().mark((function e(){return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==o.size||!ge){e.next=4;break}return console.log("creating Quick Room->",ut),e.next=4,p.a.post("/Server/QuickRoom/create/Room/".concat(ge),{RoomId:ut,Name:ut,Members:[{UserId:ge,Name:jt,RoomId:ut}],Messages:[],RoomType:"quick"}).then((function(e){console.log("created new Quick room",e.data);var t=e.data;a(new Map(o.set(t.RoomId,{RoomId:t.RoomId,Name:t.Name}))),Fe(!0),M(ut)})).catch((function(e){console.log("Err in creating Quick  room",e)}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),bt=function(){var e=Object(i.a)(Object(c.a)().mark((function e(){var t;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=document.getElementById("Message-TypeArea").value,console.log("Typed Message is ",t),console.log("Active room ->",y),e.next=5,p.a.post("/Server/QuickRoom/Message/add/".concat(y),{RoomId:y,MessageText:t,TimeStamp:Date.now(),Sender:ge,Name:jt,MessageId:(new E.a.Types.ObjectId).toString()}).then((function(e){console.log("Added New Message",e.data)})).catch((function(e){console.log("Err in Adding Message",e)}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),pt=function(){var e=Object(i.a)(Object(c.a)().mark((function e(t){return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(f.has(ge)){e.next=4;break}return console.log("User doesnt exist so adding->",ge),e.next=4,p.a.post("/Server/QuickRoom/add/User/".concat(ut),{UserId:ge,Name:jt,RoomId:ut}).then((function(e){console.log("Added new Member",e.data),w(new Map(f.set(ge,{UserId:ge,Name:jt,RoomId:y})))})).catch((function(e){console.log("Err in adding Member",e)}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ht=function(){var e=Object(i.a)(Object(c.a)().mark((function e(t,o){return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.post("/Server/QuickRoom/Delete/Member/".concat(o,"/").concat(t)).then((function(e){console.log(e.data)})).catch((function(e){console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(t,o){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){return function(){ht()}}),[]),console.log("socket ->",dt),dt&&console.log("socket Id->",dt.id),console.log("Socket is",dt);var ft=0;Object(n.useEffect)((function(){Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).fakePort;console.log("window hostname",window.location.hostname,"flag dependency ->",Ue),mt(Object(L.a)())}),[Ue]),Object(n.useEffect)((function(){return dt&&(console.log("inside socket->"),dt.on("connect",(function(){console.log("Sending rooms to socket, count->",ft),console.log(dt.id);var e=[];Object(r.a)(o).map((function(t){var o=Object(d.a)(t,2),n=o[0];o[1];return e.push(n)})),e.push(ge),console.log(e),dt.emit("joinRoom",e),ct(!0)}))),function(){dt&&(dt.on("disconnect",(function(){console.log("disccoented")})),dt.off("connect"),dt.off("disconnect"))}}),[dt]),Object(n.useEffect)((function(){return++ft,dt&&(console.log("socket Id is ",dt.id),dt.on("update",(function(e){Object.keys(e).includes("MessageId")?(me(e),he(e),console.log("new  message in socket",e)):Object.keys(e).includes("UserId")&&(De(e),console.log("new  member in socket",e))})),dt.on("insert",(function(e){console.log("New Room Detected in Socket",e),e&&console.log("Debug socket-> sending rooms to  from useeffect main"),xe(e)})),dt.on("disconnected",(function(e){console.log("User Left Socket fired"),e&&f.has(e)&&(Ze.delete(e),$e(new Map(Ze)),console.log("Socket User Left fired",e))})),dt.on("connected",(function(e){e&&$e(new Map(Ze.set(e,f.get(e)))),console.log(" USer joined room->",e)})),dt.on("MemberStatusResponse",(function(e){console.log("Active Members in Room are ",e);new Map;Ze.clear(),Array.isArray(e)&&e.forEach((function(e){Ze.set(e,f.get(e))})),$e(new Map(Ze))}))),function(){dt&&(console.log("disccoented"),dt.removeAllListeners(),dt.disconnect())}}),[dt]),Object(n.useEffect)((function(){dt&&(console.log("asking active members for room",y),dt.emit("MemberStatus",y))}),[y,Ue,ut,ot]),console.log("Active Members->",Ze),Object(n.useEffect)((function(){var e=new U.a("d3a40ccf8c32cd64d3ac",{cluster:"ap2",encrypted:!0}),t=e.subscribe("delete");return t.bind("Message",(function(e){console.log("Pusher -> delete message",e),e&&(console.log(y,e.RoomId),e.RoomId===y&&Se(e))})),t.bind("Member",(function(e){console.log("Pusher -> delete member",e),e&&e.RoomId===y&&(console.log("Member deleted"),Ie(e))})),t.bind("Room",(function(e){e&&e.UserId===ge&&Te(e)})),function(){e.unsubscribe("delete")}}),[]),Object(n.useEffect)((function(){if(console.log("New Message useEffect fired  ",de),de){console.log("New Message is ",de);var e=de;_(new Map(Q.set(e.MessageId,e))),xt()}}),[de]),Object(n.useEffect)((function(){if(console.log("New LastMessage useEffect fired  ",pe),pe){var e=pe;Y(new Map(J.set(e.RoomId,e.MessageText)))}}),[pe]),Object(n.useEffect)((function(){if(console.log("New Member useEffect fired  ",Ae),Ae){console.log("New Member is ",Ae);var e=Ae;w(new Map(f.set(e.UserId,e)))}}),[Ae]),Object(n.useEffect)((function(){if(ve){var e=ve;console.log("New Room is",ve),console.log("New Room Id is",e.RoomId),a(new Map(o.set(e.RoomId,{RoomId:e.RoomId,Name:e.Name})))}}),[ve]),Object(n.useEffect)((function(){if(console.log("delete Message useEffect fired  ",de),Re&&Q.has(Re.RoomId)){console.log("delete Message is ",Re);var e=Re;if(y===e.RoomId)Q.delete(e.MessageId),_(new Map(Q))}}),[Re]),Object(n.useEffect)((function(){if(console.log("Delete Member USeEffect Fired->",Ce),Ce&&f.has(Ce.UserId)){var e=Ce;console.log("testting delete member roomid",y===Ce.RoomId),console.log("delete member useEffect fired  ",Ce.UserId),f.delete(e.UserId),w(new Map(f))}}),[Ce]),Object(n.useEffect)((function(){if(Le){console.log("delete room use effect fired for ",Le);var e=Le;if(o.has(e.RoomId))o.delete(e.RoomId),a(new Map(o))}}),[Le]),Object(n.useEffect)((function(){return window.addEventListener("resize",(function(e){var t=window.innerWidth,o=(window.innerHeight,document.getElementById("Room-Container-Wrapper")),n=this.document.getElementById("Chat-Container-Wrapper");t<=600?(console.log("Debug Active Window -> Active Window now chatwindow -> width<600px && window===both"),o&&!o.classList.contains("Hide")&&n&&!n.classList.contains("Hide")&&o.classList.add("Hide")):t>600&&(o&&o.classList.contains("Hide")&&o.classList.remove("Hide"),n&&n.classList.contains("Hide")&&n.classList.remove("Hide"),console.log("Debug Active Window -> Active Window now Both -> width>600px"))})),function(){window.removeEventListener("resize",(function(){console.log("Removed Event")}))}}),[]),console.log("Members before rendering are",f),console.log("Rooms before rendering are",o);var Ot;ft=0;console.log(J);var vt=Object(n.useRef)(null),xt=function(){var e;null===(e=vt.current)||void 0===e||e.scrollIntoView({behavior:"smooth"}),document.getElementById("ScrollDownDiv").scrollIntoView(!1)};Object(n.useEffect)((function(){xt()}),[Ke]);return Object(m.jsxs)("div",{className:"ContentWrapper",children:[Object(m.jsx)("div",{className:"Room-container-Wrapper"+("ChatWindow"===ee?" Hide":""),children:Object(m.jsxs)("div",{className:"Room-container",children:[Object(m.jsxs)("div",{className:"Room-Header-Wrapper",children:[Object(m.jsx)("div",{className:"Room-Header-scopeSwitch",children:Object(m.jsx)(u,{})}),Object(m.jsx)("div",{className:"Room-Header-contents",children:Object(m.jsx)(R.a,{component:"form",sx:{p:"2px 4px",display:"flex",alignItems:"center",width:"89%"},children:Object(m.jsxs)("div",{className:"RoomSearchBarContainer",id:"RoomSearchBarContainer",children:[Object(m.jsx)(q.c,{id:"RoomSearchBar",sx:{ml:1,flex:1},placeholder:"Search Rooms",inputProps:{"aria-label":"Search Rooms"}}),Object(m.jsx)(x.a,{type:"submit",sx:{p:"10px",flex:.3},"aria-label":"search",children:Object(m.jsx)(X.a,{})})]})})})]}),Object(m.jsx)("div",{className:"Room-Window-Wrapper",children:Object(m.jsx)("div",{className:"Room-Window",children:Object(r.a)(o.keys()).map((function(e){return Object(m.jsx)("div",{onClick:function(){nt(ot+1),document.body.clientWidth,Ot=document.body.clientWidth;var t=document.getElementById("Room-Container-Wrapper"),o=document.getElementById("Chat-Container-Wrapper");console.log("Active RoomID is ",y,e,y===e),Ot<=600&&(o&&o.classList.contains("Hide")&&o.classList.remove("Hide"),t&&!t.classList.contains("Hide")&&t.classList.add("Hide"))},children:Object(m.jsx)(j,{ProfileName:e,LastMessage:J.get(e)})})}))})})]})}),Object(m.jsx)("div",{className:"Chat-container-Wrapper"+("RoomWindow"===ee?" Hide":""),id:"Chat-Container-Wrapper",children:Object(m.jsxs)("div",{className:"Chat-Container",children:[Object(m.jsx)("div",{className:"Chat-Header-Wrapper",children:Object(m.jsxs)("div",{className:"Chat-Header",children:[Object(m.jsx)("div",{className:"backArrow-ChatHeader",children:Object(m.jsx)(O.a,{className:"BackArrow-ChatWindow BackArrowRes backArrow-ChatHeader",onClick:function(){te("RoomWindow")},sx:{width:"40px",height:"30px"}})}),Object(m.jsxs)("div",{className:"RoomDetails-Wrapper-ChatHeader",onClick:function(e){var t=document.getElementById("Room-Container-Wrapper"),o=document.getElementById("Chat-Container-Wrapper");document.body.clientWidth<=600&&(t&&t.classList.contains("Hide")&&t.classList.remove("Hide"),o&&!o.classList.contains("Hide")&&o.classList.add("Hide"))},children:[Object(m.jsx)("img",{className:"RoomDetails-Avatar-ChatHeader",src:"",alt:"error"}),Object(m.jsx)("div",{className:"RoomDetails-Name-ChatHeader",children:ut})]}),Object(m.jsxs)("div",{className:"RoomOptions-ChatHeader",children:[Object(m.jsx)("div",{className:"RoomDetails-ChatHeader"}),Object(m.jsx)("div",{className:"Search-ChatHeader",children:Object(m.jsxs)(R.a,{component:"form",sx:{p:"2px 4px",display:"flex",alignItems:"center",width:"89%"},children:[Object(m.jsxs)("div",{className:"ChatSearchBarContainer",id:"ChatSearchBarContainer",children:[Object(m.jsx)(q.c,{id:"ChatSearchBar",sx:{ml:1,flex:1},placeholder:"Search Chat",inputProps:{"aria-label":"Search Chat"}}),Object(m.jsx)(x.a,{type:"submit",sx:{p:"10px",flex:.3},"aria-label":"search",children:Object(m.jsx)(X.a,{})})]}),Object(m.jsx)(G.a,{sx:{height:28,m:.5},orientation:"vertical"}),Object(m.jsx)(K,{Members:f,ActiveRoomId:y})]})}),console.log("Active Room id is->",y)]})]})}),Object(m.jsxs)("div",{className:"Chat-Box-Wrapper",id:"Chat-Box-Wrapper",children:[Object(m.jsxs)("div",{className:"Chat-Box",children:[console.log(Q.size),Object(r.a)(Q.keys()).map((function(e){var t=new Date(Q.get(e).TimeStamp);return t=t.toString().split(" "),console.log("Time parts",t),t=t[1]+" "+t[2]+" "+t[3]+" "+t[4],Object(m.jsx)(g,{own:Q.get(e).Sender===ge,MessageText:Q.get(e).MessageText,Name:Q.get(e).Name,TimeStamp:t})})),Object(m.jsx)("div",{ref:vt,id:"ScrollDownDiv"})]}),Object(m.jsxs)("div",{className:"Members-Wrapper-ChatContainer",children:[Object(m.jsx)("p",{className:"WhiteTextOnDarkBG H2",children:"Members:  "}),Object(m.jsxs)("div",{className:"MembersList-ChatContainer",children:[Object(r.a)(Ze.keys()).map((function(e){return f.get(e)?Object(m.jsxs)("div",{className:"MemberWrapper-ChatContainer",children:[Object(m.jsx)("div",{className:"MemberName-ChatContainer ActiveMember-Online",children:f.get(e).Name}),Object(m.jsx)("div",{className:"MemberStatus-ChatContainer"})]}):null})),Object(r.a)(f.keys()).map((function(e){return Ze.has(e)?null:Object(m.jsxs)("div",{className:"MemberWrapper-ChatContainer",children:[Object(m.jsx)("div",{className:"MemberName-ChatContainer",children:f.get(e).Name}),Object(m.jsx)("div",{className:"MemberStatus-ChatContainer"})]})}))]})]})]}),Object(m.jsx)("div",{className:"Type-Menu",children:Object(m.jsx)("div",{className:"emoji-Stickers"})}),Object(m.jsxs)("div",{className:"TypeArea",children:[Object(m.jsx)("div",{className:"TypeBox-Container",children:Object(m.jsx)(h.a,{id:"Message-TypeArea",label:"Message",placeholder:"Message",multiline:!0,maxRows:3,onKeyPress:function(e){"Enter"===e.key&&e.shiftKey&&(bt(),e.preventDefault())},sx:{width:"90%",margin:"10px",maxWidth:"700px",boxShadow:4}})}),Object(m.jsx)("div",{className:"TypeArea-SendButton",children:Object(m.jsx)(v.a,{className:"Chat-SendButton",onClick:function(){var e=document.getElementById("Message-TypeArea").value;console.log("Submitted Message  is ",e),e.length>0?bt():alert("Type atleast 1 Letter")}})})]})]})}),Object(m.jsxs)("div",{className:"RoomDetails-FullDetails Hide",id:"RoomDetails-FullDetails",children:[Object(m.jsx)("div",{className:"RoomInside-DetailsHeader",children:Object(m.jsx)(O.a,{className:"BackArrow-ChatWindow BackArrowRes backArrow-ChatHeader",onClick:function(){var e=document.getElementById("RoomDetails-FullDetails");e&&e.classList.add("Hide"),(e=document.getElementById("Chat-Container-Wrapper"))&&e.classList.remove("Hide")},sx:{width:"40px",height:"30px"}})}),"Members :",Object(m.jsxs)("div",{className:"RoomInside-MembersList",children:[Object(r.a)(Ze.keys()).map((function(e){return f.has(e)?Object(m.jsxs)("div",{className:"Member-InsideDetailsList-Wrapper",children:[Object(m.jsx)("img",{className:"MemberAvatar-InsideDetailsList",src:"",alt:"error"}),Object(m.jsx)("div",{className:"MemberName-InsideDetailsList ActiveMember-Online",children:f.get(e).Name})]}):null})),Object(r.a)(f.keys()).map((function(e){return Ze.has(e)?null:Object(m.jsxs)("div",{className:"Member-InsideDetailsList-Wrapper",children:[Object(m.jsx)("img",{className:"MemberAvatar-InsideDetailsList",src:"",alt:"error"}),Object(m.jsx)("div",{className:"MemberName-InsideDetailsList",children:f.get(e).Name})]})}))]})]})]})}),pe=function(){return Object(m.jsx)("div",{className:"Content-wrapper",children:Object(m.jsxs)(I.c,{children:[Object(m.jsx)(I.a,{exact:!0,path:"/Account/:UserName",element:Object(m.jsx)(ce,{})}),Object(m.jsx)(I.a,{exact:!0,path:"/Home/:UserName",element:Object(m.jsx)(ie,{})}),Object(m.jsx)(I.a,{exact:!0,path:"/Login",element:Object(m.jsx)(me,{})}),Object(m.jsx)(I.a,{exact:!0,path:"/SignUp",element:Object(m.jsx)(ue,{})}),Object(m.jsx)(I.a,{exact:!0,path:"/",element:Object(m.jsx)(ie,{})}),Object(m.jsx)(I.a,{exact:!0,path:"/Account",element:Object(m.jsx)(ce,{})}),Object(m.jsx)(I.a,{exact:!0,path:"/QuickRoom/:UserType/:RoomId/:UserId/:Name",element:Object(m.jsx)(be,{})}),Object(m.jsx)(I.a,{exact:!0,path:"/SavedRoom/:RoomId/:UserId",element:Object(m.jsx)(ce,{})}),Object(m.jsx)(I.a,{exact:!0,path:"/SavedRoom/:RoomId",element:Object(m.jsx)(ce,{})})]})})},he=o(32);var fe=function(){return Object(m.jsx)(he.a,{children:Object(m.jsx)("div",{className:"Content-wrapper",children:Object(m.jsx)(pe,{})})})};s.a.render(Object(m.jsx)(fe,{}),document.getElementById("root"))}},[[198,1,2]]]);
//# sourceMappingURL=main.1f0e5292.chunk.js.map